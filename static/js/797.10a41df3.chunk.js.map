{"version":3,"file":"static/js/797.10a41df3.chunk.js","mappings":"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","sources":["pages/MoviesPage.jsx","service/utils.js"],"sourcesContent":["import React, { useState, useEffect, lazy, Suspense } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { fetchMoviesByQuery } from 'service/utils';\nconst MoviesList = lazy(() => import('../components/MoviesList/MoviesList'));\n\nconst MoviesPage = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [input, setInput] = useState('');\n  const [moviesFound, setMoviesFound] = useState([]);\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    let query = localStorage.getItem('query');\n    if (query) {\n      setInput(query);\n    }\n  }, []);\n\n  useEffect(() => {\n    setError(null);\n\n    if (!input) {\n      setMoviesFound([]);\n    }\n    if (input) {\n      setSearchParams({ input });\n      localStorage.setItem('query', input);\n      setIsLoading(true);\n      fetchMoviesByQuery(input, page)\n        .then(res => {\n          const dataArray = res.results;\n          setMoviesFound(prevMoviesFound => [...prevMoviesFound, ...dataArray]);\n        })\n        .catch(err => {\n          setError(err.message);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [input, page, setSearchParams]);\n\n  useEffect(() => {\n    setInput(searchParams.get('input'));\n  }, [searchParams]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    setInput(e.target.elements.searchQuery.value.toLowerCase());\n    setSearchParams({\n      query: e.target.elements.searchQuery.value.toLowerCase(),\n    });\n  };\n\n  const onNextPage = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  return (\n    <>\n      <main>\n        <form onSubmit={handleSubmit}>\n          <label>\n            <input name=\"searchQuery\" />\n            <button type=\"submit\">Search</button>\n          </label>\n        </form>\n\n        {isLoading && <p>Loading...</p>}\n        {error && <p>Error: {error}</p>}\n        <Suspense>\n          <MoviesList moviesFound={moviesFound} searchParams={searchParams} />\n        </Suspense>\n        {moviesFound.length > 0 && !isLoading && !error && (\n          <button onClick={onNextPage}>Load More</button>\n        )}\n      </main>\n    </>\n  );\n};\n\nexport default MoviesPage;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst KEY = '42fa24333ee689285b5f9f8d0d7e86b8';\n\nexport const fetchTrendingMovies = async () => {\n  let result = await axios.get(\n    `${BASE_URL}trending/all/day?language=en-US&api_key=${KEY}`\n  );\n\n  let data = await result.data;\n  return data;\n};\n\nexport const fetchMoviesByQuery = async (query, page) => {\n  let result = await axios.get(\n    `${BASE_URL}search/movie?include_adult=false&language=en-US&api_key=${KEY}&query=${query}&page=${page}`\n  );\n\n  let data = await result.data;\n  return data;\n};\n\nexport const fetchMoviesById = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n\nexport const fetchCastsByMovieId = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}/credits?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n\nexport const fetchReviewsByMovieId = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}/reviews?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n"],"names":["MoviesList","lazy","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","setSearchParams","_useState","useState","_useState2","input","setInput","_useState3","_useState4","moviesFound","setMoviesFound","_useState5","_useState6","page","setPage","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState10","error","setError","useEffect","query","localStorage","getItem","setItem","fetchMoviesByQuery","then","res","dataArray","results","prevMoviesFound","concat","_toConsumableArray","catch","err","message","finally","get","_jsx","_Fragment","children","_jsxs","onSubmit","e","preventDefault","target","elements","searchQuery","value","toLowerCase","name","type","Suspense","length","onClick","prevPage","BASE_URL","KEY","fetchTrendingMovies","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","result","data","_context","prev","next","axios","sent","abrupt","stop","apply","arguments","_ref2","_callee2","_context2","_x","_x2","fetchMoviesById","_ref3","_callee3","id","_context3","_x3","fetchCastsByMovieId","_ref4","_callee4","_context4","_x4","fetchReviewsByMovieId","_ref5","_callee5","_context5","_x5"],"sourceRoot":""}