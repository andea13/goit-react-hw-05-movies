{"version":3,"file":"static/js/797.c0f77f32.chunk.js","mappings":"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","sources":["pages/MoviesPage.jsx","service/utils.js"],"sourcesContent":["import React, { useState, useEffect, lazy, Suspense } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { fetchMoviesByQuery } from 'service/utils';\nconst MoviesList = lazy(() => import('../components/MoviesList/MoviesList'));\n\nconst MoviesPage = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [moviesFound, setMoviesFound] = useState([]);\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSearchParams({\n      query: e.target.elements.searchQuery.value.toLowerCase(),\n    });\n    setMoviesFound([]);\n  };\n\n  const input = searchParams.get('query');\n\n  useEffect(() => {\n    if (!input) {\n      setError(null);\n      setMoviesFound([]);\n    }\n    if (input) {\n      setIsLoading(true);\n      fetchMoviesByQuery(input, page)\n        .then(res => {\n          const dataArray = res.results;\n          setMoviesFound(prevMoviesFound => [...prevMoviesFound, ...dataArray]);\n        })\n        .catch(err => {\n          setError(err.message);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [input, page]);\n\n  const onNextPage = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  return (\n    <>\n      <main>\n        <form onSubmit={handleSubmit}>\n          <label>\n            <input name=\"searchQuery\" />\n            <button type=\"submit\">Search</button>\n          </label>\n        </form>\n\n        {isLoading && <p>Loading...</p>}\n        {error && <p>Error: {error}</p>}\n        <Suspense>\n          <MoviesList moviesFound={moviesFound} searchParams={searchParams} />\n        </Suspense>\n        {moviesFound.length > 0 && !isLoading && !error && (\n          <button onClick={onNextPage}>Load More</button>\n        )}\n      </main>\n    </>\n  );\n};\n\nexport default MoviesPage;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst KEY = '42fa24333ee689285b5f9f8d0d7e86b8';\n\nexport const fetchTrendingMovies = async () => {\n  let result = await axios.get(\n    `${BASE_URL}trending/all/day?language=en-US&api_key=${KEY}`\n  );\n\n  let data = await result.data;\n  return data;\n};\n\nexport const fetchMoviesByQuery = async (query, page) => {\n  let result = await axios.get(\n    `${BASE_URL}search/movie?include_adult=false&language=en-US&api_key=${KEY}&query=${query}&page=${page}`\n  );\n\n  let data = await result.data;\n  return data;\n};\n\nexport const fetchMoviesById = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n\nexport const fetchCastsByMovieId = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}/credits?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n\nexport const fetchReviewsByMovieId = async id => {\n  let result = await axios.get(`${BASE_URL}movie/${id}/reviews?api_key=${KEY}`);\n\n  let data = result.data;\n  return data;\n};\n"],"names":["MoviesList","lazy","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","setSearchParams","_useState","useState","_useState2","moviesFound","setMoviesFound","_useState3","_useState4","page","setPage","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","error","setError","input","get","useEffect","fetchMoviesByQuery","then","res","dataArray","results","prevMoviesFound","concat","_toConsumableArray","catch","err","message","finally","_jsx","_Fragment","children","_jsxs","onSubmit","e","preventDefault","query","target","elements","searchQuery","value","toLowerCase","name","type","Suspense","length","onClick","prevPage","BASE_URL","KEY","fetchTrendingMovies","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","result","data","_context","prev","next","axios","sent","abrupt","stop","apply","arguments","_ref2","_callee2","_context2","_x","_x2","fetchMoviesById","_ref3","_callee3","id","_context3","_x3","fetchCastsByMovieId","_ref4","_callee4","_context4","_x4","fetchReviewsByMovieId","_ref5","_callee5","_context5","_x5"],"sourceRoot":""}